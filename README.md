# 26th_PCB_AirData
メイン兼エアデータセンサー部（今後、エアデータと言います）のリポジトリです。
## 基板作成時の注意点
PCBエディターで基板上の配線をするときに気をつけてほしい点・できるだけ避けるべき点が書いてあります．これが全てではないのですが，最低限これらは守ってほしいです🙏  
( ｀・∀・´)ﾉﾖﾛｼｸ
### KiCadの初期設定
これから表面実装化に向けた，小さく密度の高い基板を作ろうとするとKiCadの初期設定状態では不便が生じます．それは例えば配線のクリアランス（配線同士の最低間隔）やビア半径の初期設定値が大きすぎるためです．  
以下の画像下部のGNDビアはその上のコンデンサと同じぐらいの大きさになっていて，もはや邪魔です．  
<img width="500" height="778" alt="image" src="https://github.com/user-attachments/assets/9dc073f4-7d39-4f44-b29c-0b9c6b46b7a5" />  
そこで，以下の画像左上「ビア：ネットクラスのサイズを使用」から任意の半径でビアの大きさを指定できるのですが，[JLCPCBの製造能力](https://jlcpcb.com/jp/capabilities/pcb-capabilities)には限界があるわけでその限界を突破しないギリギリで設計する必要があります．その限界を突破していないか確認してくれる機能を活用するためにKiCad初期設定を変更します．  
<img width="1919" height="990" alt="image" src="https://github.com/user-attachments/assets/cacfa8a9-fa94-4381-ad05-0062fc997e36" />
1. ファイル ＞ 基板の設定
<img width="1919" height="1017" alt="image" src="https://github.com/user-attachments/assets/38d11a01-088e-4200-a178-2f459dd85d28" />  

2. デザインルール ＞ 制約
<img width="1918" height="1018" alt="image" src="https://github.com/user-attachments/assets/01847bb4-8a08-4854-8415-595e29ed0c79" />

3. 以下のようにパラメータを変更
<img width="444" height="695" alt="image" src="https://github.com/user-attachments/assets/db7b8c8f-52e0-461f-bd9d-095a752814f5" />

### USBの配線について
USBは差動伝送で通信しています．そのため，2本の配線のどちらかにだけノイズが乗ることや配線長に差があること，配線が長すぎることは避けるべきです．また，差動インピーダンスを考慮する必要があり，普段の配線よりも気を使う点が多いです．以下の点に気をつけて配線をお願いします．  
- 差動インピーダンスを90Ωに近づける（[JLCPCB公式計算ツール](https://jlcpcb.com/jp/pcb-impedance-calculator)）
- KiCad「配線 ＞ 差動ペアを配線」機能を使用する
- 同一レイヤー上で配線する（front面とback面を行き来しない）
- できるだけ配線を曲げず，一直線に配線する
- 電源線（5V，3.3Vなど）を近くに置かない
- Type-Cに接続するときに配線幅を変える必要がある場合、ティアドロップ（フィレット的な機能、以下「ティアドロップの使用」参照）を使用して滑らかに幅を変化させる
- USB配線の裏面に別の配線を置かない

### テストポイント（TP）について
TPは基板を作ったあとに正しく信号が流れているかオシロスコープやテスターを用いて確認するために重要です。一方でノイズの発生源となったり逆にノイズを拾ったりすることも考えられます。その為、できるだけ少ない数配置すべきです。また、USBやGPIOなどの信号線にはできるだけ配置したくありません。どうしても配置する必要がある場合は、以下のように配線上に置くようにし、枝分かれしたところに置くことはやめてください。

### ティアドロップの使用
今まで（25代まで）はパッドと配線の接続やビアとの接続時に特に何も考えずにやってきたと思います。ただ、これから密度の高い基板を作るにあたってノイズの発生を最大限に抑制する必要があり、急激な配線幅の変化をなくすべきです。今まで配線を90°に曲げるのは良くないと言われてきたのも同じ理由からです。そこでティアドロップ機能を使います。この機能は以下の画像の様に徐々に幅を変化させてくれるのでノイズが軽減されるはずです。また、この機能のレイヤーはゾーンになっているため、表示されない場合はレイヤーが非表示になっていないか確認してください。以下がティアドロップの適用手順です。
1.
2. 
3. 

### ビアについて
ビアには主に2つの目的があります。
- 配線をfrontからbackに移す（逆も然り）
- 層間のコンデンサ形成を防ぐ  
  例えば2層基板なら1層目と2層目の間の絶縁体を誘電体としたコンデンサにならないようにする。
![image](https://github.com/user-attachments/assets/859ceb6a-880f-43d1-9b02-4136f121ecca)
1つ目の目的でビアを使うのは一般的ですが、2つ目のコンデンサになるのを防ぐ目的でビアを使用しているか確認してください。
